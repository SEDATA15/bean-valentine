<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bean My Valentine üíò</title>
<style>
body {
margin: 0;
padding: 0;
font-family: 'Poppins', sans-serif;
background: #ffd6e8;
display: flex;
justify-content: center;
align-items: center;
height: 100vh;
overflow: hidden;
text-align: center;
position: relative;
}

.container {
background: white;
padding: 40px;
border-radius: 20px;
box-shadow: 0 10px 25px rgba(0,0,0,0.1);
max-width: 400px;
width: 90%;
position: relative;
z-index: 2;
/* Confetti */
.confetti {
position: fixed;
width: 10px;
height: 10px;
background: red;
top: 0;
animation: fall 3s linear infinite;
}

@keyframes fall {
to { transform: translateY(100vh) rotate(360deg); }
}

/* Floating hearts */
.heart {
position: fixed;
font-size: 16px;
color: #ff4d88;
user-select: none;
pointer-events: none;
animation: floatUp linear infinite;
}

@keyframes floatUp {
0% { transform: translateY(0) scale(1); opacity:1; }
100% { transform: translateY(-100vh) scale(1.5); opacity:0; }
}

/* Typing animation */
.typewriter {
display: inline-block;
overflow: hidden;
white-space: nowrap;
border-right: .15em solid #ff4d88;
animation: typing 3s steps(30, end), blink .75s step-end infinite;
}

@keyframes typing {
from { width: 0 }
to { width: 100% }
}

@keyframes blink {
50% { border-color: transparent; }
}

/* Music toggle */
#musicToggle {
position: fixed;
top: 10px;
right: 10px;
background: #ff4d88;
color: white;
border: none;
padding: 8px 12px;
border-radius: 12px;
cursor: pointer;
z-index: 5;
}

</style>
</head>
<body>

<button id="musicToggle">üéµ Music</button>

<div class="container">
<h1 id="headline">Hi‚Ä¶ I have something important to ask you‚Ä¶</h1>
<img id="mainGif" src="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExemtzcTBzNm05cnFnZGN4aGd0NDMycDZqYTZ5NmFsdGdnNzd3eTBmayZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/qnaCSVwRTmsgg/giphy.gif" alt="Beggy Eyes">
<div class="buttons">
<button id="nextBtn">Okay‚Ä¶</button>
</div>
</div>

<audio id="bgMusic" loop>
<source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
</audio>

<script>
const container = document.querySelector('.container');
const headline = document.getElementById('headline');
const gif = document.getElementById('mainGif');
const buttonsDiv = document.querySelector('.buttons');
const bgMusic = document.getElementById('bgMusic');
const musicToggle = document.getElementById('musicToggle');

musicToggle.addEventListener('click', () => {
if(bgMusic.paused){
bgMusic.play();
musicToggle.innerText = "üîá Music";
} else {
bgMusic.pause();
musicToggle.innerText = "üéµ Music";
}
});

// Floating hearts generator
function createHeart(){
const heart = document.createElement('div');
heart.className = 'heart';
heart.innerText = 'üíñ';
heart.style.left = Math.random()*100 + 'vw';
heart.style.fontSize = (12+Math.random()*18) + 'px';
heart.style.animationDuration = (4+Math.random()*3)+'s';
document.body.appendChild(heart);
setTimeout(()=> heart.remove(), 7000);
}
setInterval(createHeart, 500);

let stage = 0;
let noAttempts = 0;

function clearButtons(){ buttonsDiv.innerHTML = ''; }
function launchConfetti(){
for (let i=0;i<30;i++){
const confetti = document.createElement('div');
confetti.classList.add('confetti');
confetti.style.left = Math.random()*100 + "vw";
confetti.style.background = `hsl(${Math.random()*360},100%,50%)`;
confetti.style.animationDuration = (Math.random()*2+2)+'s';
document.body.appendChild(confetti);
setTimeout(()=> confetti.remove(),3000);
}
}

// Stage progression
document.getElementById('nextBtn').addEventListener('click', () => {
stage++;
clearButtons();
if(stage===1){
headline.innerText = "I've been thinking about this for a while...";
gif.src = "https://media.giphy.com/media/3o7abB06u9bNzA8lu8/giphy.gif";
const btn = document.createElement('button');
btn.innerText = "Go on‚Ä¶";
buttonsDiv.appendChild(btn);
btn.addEventListener('click', ()=>{ stage++; advanceStage(); });
} else { advanceStage(); }
});

function advanceStage(){
if(stage===2){
headline.innerText = "You mean a lot to me‚Ä¶";
gif.src = "https://media.giphy.com/media/l3vR1U7tP5hSJv8Oc/giphy.gif"; // sad puppy eyes
const btn = document.createElement('button');
btn.innerText = "WHAT IS IT??";
buttonsDiv.appendChild(btn);
btn.addEventListener('click', ()=>{ stage++; showFinalQuestion(); });
}
}

function showFinalQuestion(){
headline.innerText = "Will you bean my Valentine? ü´òüíò";
gif.src = "https://media.giphy.com/media/3oriO0OEd9QIDdllqo/giphy.gif";

clearButtons();

const yesBtn = document.createElement('button');
yesBtn.id = "yesBtn"; yesBtn.innerText = "Yes üíï";
const noBtn = document.createElement('button');
noBtn.id = "noBtn"; noBtn.innerText = "No üôÉ";
buttonsDiv.appendChild(yesBtn); buttonsDiv.appendChild(noBtn);

// NO button antics
noBtn.addEventListener('mouseover', moveNo);
noBtn.addEventListener('touchstart', e=>{ e.preventDefault(); moveNo(); });
function moveNo(){
noAttempts++;
const maxX = container.offsetWidth - noBtn.offsetWidth;
const maxY = 80 - noBtn.offsetHeight;
const randomX = Math.random()*maxX;
const randomY = Math.random()*maxY;
noBtn.style.left = randomX+'px';
noBtn.style.top = randomY+'px';
if(noAttempts===3) noBtn.innerText="Be serious.";
if(noAttempts===5) noBtn.innerText="That‚Äôs illegal.";
if(noAttempts===7) noBtn.style.transform="scale(0.6)";
if(noAttempts>9) noBtn.style.display="none";
}

// YES button
yesBtn.addEventListener('click', ()=>{
gif.style.opacity=0;
setTimeout(()=>{
gif.src="https://media.giphy.com/media/26ufdipQqU2lhNA4g/giphy.gif"; // celebration GIF
gif.style.opacity=1;
},300);

headline.innerText="YAY!!! üíï You just made me the happiest bean alive ü´ò";
yesBtn.style.display="none";
noBtn.style.display="none";
launchConfetti();

setTimeout(()=>{
// Swap to Adam Sandler GIF
gif.src = "https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif";
gif.style.width = "280px";

// Typing quote
const quote = document.createElement('p');
quote.style.marginTop="20px";
quote.style.fontSize="18px";
quote.style.color="#ff4d88";
quote.className='typewriter';
quote.innerHTML='‚ÄúI wanna grow old with you.‚Äù<br><br>‚Äî Adam Sandler, <em>The Wedding Singer</em> üé§üíñ';
container.appendChild(quote);
},1500);
});
}
</script>
</body>
</html>
