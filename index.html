<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bean My Valentine üíò</title>
<style>
body {
margin: 0;
padding: 0;
font-family: 'Poppins', sans-serif;
background: #ffd6e8;
display: flex;
justify-content: center;
align-items: center;
height: 100vh;
overflow: hidden;
text-align: center;
position: relative;
}

.container {
background: white;
padding: 30px;
border-radius: 20px;
box-shadow: 0 10px 25px rgba(0,0,0,0.1);
width: 95%;
max-width: 600px;
position: relative;
z-index: 2;
}

h1 {
margin-bottom: 20px;
color: #ff4d88;
font-size: 2em;
}

img {
width: 100%;
max-width: 500px;
border-radius: 15px;
transition: opacity 0.4s ease;
}

.buttons {
margin-top: 30px;
position: relative;
height: 100px;
}

button {
padding: 14px 28px;
font-size: 18px;
border: none;
border-radius: 30px;
cursor: pointer;
transition: all 0.2s ease;
position: absolute;
}

#yesBtn {
background-color: #ff4d88;
color: white;
left: 20%;
}

#noBtn {
background-color: #cccccc;
color: black;
right: 20%;
}

/* Confetti */
.confetti {
position: fixed;
width: 10px;
height: 10px;
background: red;
top: 0;
animation: fall 3s linear infinite;
}

@keyframes fall {
to { transform: translateY(100vh) rotate(360deg); }
}

/* Typing animation */
.typewriter {
display: inline-block;
overflow: hidden;
white-space: nowrap;
border-right: .15em solid #ff4d88;
animation: typing 4s steps(40, end), blink .75s step-end infinite;
font-size: 1.5em;
}

@keyframes typing {
from { width: 0 }
to { width: 100% }
}

@keyframes blink {
50% { border-color: transparent; }
}

/* Music toggle */
#musicToggle {
position: fixed;
top: 10px;
right: 10px;
background: #ff4d88;
color: white;
border: none;
padding: 8px 12px;
border-radius: 12px;
cursor: pointer;
z-index: 5;
}
</style>
</head>
<body>

<button id="musicToggle">üéµ Music</button>

<div class="container">
<h1 id="headline">Hi‚Ä¶ I have something important to ask you‚Ä¶</h1>
<img id="mainGif" src="https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExMXAyZ3UwOWVpd3RkMWJyb2gxeXl3ZXAzc2ZvaXloNG0zZ2pkbmNtbCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/3qgWUmZmPms6s/giphy.gif" alt="Beggy Puppy Eyes">
<div class="buttons">
<button id="nextBtn">Okay‚Ä¶</button>
</div>
</div>

<audio id="bgMusic" loop>
<source src="https://on.soundcloud.com/HhoXkccFAm8kO9JiWq" type="audio/mpeg">
</audio>

<script>
const container = document.querySelector('.container');
const headline = document.getElementById('headline');
const gif = document.getElementById('mainGif');
const buttonsDiv = document.querySelector('.buttons');
const bgMusic = document.getElementById('bgMusic');
const musicToggle = document.getElementById('musicToggle');

musicToggle.addEventListener('click', () => {
if(bgMusic.paused){
bgMusic.play();
musicToggle.innerText = "üîá Music";
} else {
bgMusic.pause();
musicToggle.innerText = "üéµ Music";
}
});

let stage = 0;
let noAttempts = 0;

function clearButtons(){ buttonsDiv.innerHTML = ''; }
function launchConfetti(){
for (let i=0;i<30;i++){
const confetti = document.createElement('div');
confetti.classList.add('confetti');
confetti.style.left = Math.random()*100 + "vw";
confetti.style.background = `hsl(${Math.random()*360},100%,50%)`;
confetti.style.animationDuration = (Math.random()*2+2)+'s';
document.body.appendChild(confetti);
setTimeout(()=> confetti.remove(),3000);
}
}

// Stage progression
document.getElementById('nextBtn').addEventListener('click', () => {
stage++;
clearButtons();
if(stage===1){
headline.innerText = "I've been thinking about this for a while...";
gif.src = "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExeTl6YjBmZDBwOTNoZTVlbmd4NjcxMXBjamJiemhoNjFqMmFhMDExOSZlcD12MV9naWZzX3NlYXJjaCZjdD1n/3otPoKbU66TUtwB5xS/giphy.gif"; // Sad Puppy
const btn = document.createElement('button');
btn.innerText = "Go on‚Ä¶";
buttonsDiv.appendChild(btn);
btn.addEventListener('click', ()=>{ stage++; advanceStage(); });
} else { advanceStage(); }
});

function advanceStage(){
if(stage===2){
headline.innerText = "You mean a lot to me‚Ä¶";
gif.src = "https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExN2N1bTd6NGpwZHBueTN6ODBlbGptYnJ0YmZncHFtMXo2d2E1Y3dheCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/Y6Wpnk8vJNxIoLNF7d/giphy.gif"; // Sad Bean
const btn = document.createElement('button');
btn.innerText = "WHAT IS IT??";
buttonsDiv.appendChild(btn);
btn.addEventListener('click', ()=>{ stage++; showFinalQuestion(); });
}
}

function showFinalQuestion(){
headline.innerText = "Will you bean my Valentine? ü´òüíò";
gif.src = "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExN2J1eXptMzFmeDR3ZmEwejQ5MmVia2p1dTExd2xyNWtlYmdjdzg3cCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/l49JKU5LQq7Pe9zag/giphy.gif"; // Beggy Puppy

clearButtons();

const yesBtn = document.createElement('button');
yesBtn.id = "yesBtn"; yesBtn.innerText = "Yes üíï";
const noBtn = document.createElement('button');
noBtn.id = "noBtn"; noBtn.innerText = "No üôÉ";
buttonsDiv.appendChild(yesBtn); buttonsDiv.appendChild(noBtn);

// NO button antics
noBtn.addEventListener('mouseover', moveNo);
noBtn.addEventListener('touchstart', e=>{ e.preventDefault(); moveNo(); });
function moveNo(){
noAttempts++;
const maxX = container.offsetWidth - noBtn.offsetWidth;
const maxY = 100 - noBtn.offsetHeight;
const randomX = Math.random()*maxX;
const randomY = Math.random()*maxY;
noBtn.style.left = randomX+'px';
noBtn.style.top = randomY+'px';
if(noAttempts===3) noBtn.innerText="Be serious.";
if(noAttempts===5) noBtn.innerText="That‚Äôs illegal.";
if(noAttempts===7) noBtn.style.transform="scale(0.6)";
if(noAttempts>9) noBtn.style.display="none";
}

// YES button
yesBtn.addEventListener('click', ()=>{
gif.style.opacity=0;
setTimeout(()=>{
gif.src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExNmxjc2o5bTJnZnpub2w3aDV0ZWRtOTB4emp5ZHQ0emlqOGV2M202dCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/26BRGFr3k1PGa616o/giphy.gif"; // Beans & Puppies Celebration
gif.style.opacity=1;
},300);

headline.innerText="YAY!!! üíï You just made me the happiest bean alive ü´ò";
yesBtn.style.display="none";
noBtn.style.display="none";
launchConfetti();

setTimeout(()=>{
// Swap to Adam Sandler GIF from Wedding Singer
gif.src = "https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExdzdxdzZueXlkeDl4Mjl4ZGRpOXVkY3lkcXA4MW42dHExNmJ6dms2cCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/jbEFL1gp7yOac/giphy.gif";
gif.style.width = "300px";

// Typing quote
const quote = document.createElement('p');
quote.style.marginTop="20px";
quote.style.fontSize="1.5em";
quote.style.color="#ff4d88";
quote.className='typewriter';
quote.innerHTML='‚ÄúI wanna grow old with you.‚Äù<br><br>‚Äî Adam Sandler, <em>The Wedding Singer</em> üé§üíñ';
container.appendChild(quote);
},1500);
});
}
</script>
</body>
</html>
